<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Quote Generator with Storage</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Dynamic Quote Generator</h1>
            <p class="subtitle">Discover inspirational quotes or add your own</p>
        </header>

        <main>
            <!-- Sync Status Section -->
            <section class="sync-section">
                <div class="sync-header">
                    <h3>Cloud Sync Status</h3>
                    <div class="sync-controls">
                        <button id="syncNowBtn" class="btn btn-success" title="Manually sync with server">
                            ‚òÅ Sync Now
                        </button>
                        <button id="conflictHistoryBtn" class="btn btn-info" title="View conflict history">
                            ‚ö† Conflict History
                        </button>
                        <button id="toggleAutoSyncBtn" class="btn btn-secondary" title="Toggle automatic syncing">
                            üîÑ Auto Sync: ON
                        </button>
                    </div>
                </div>
                
                <div id="syncStatus" class="sync-status">
                    <div class="status-indicator pending"></div>
                    <span id="syncStatusText">Initializing sync...</span>
                </div>
            </section>

            <!-- Conflict Resolution Modal -->
            <div id="conflictModal" class="modal" style="display: none;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Conflict Resolution</h3>
                        <button id="closeConflictModal" class="modal-close">&times;</button>
                    </div>
                    <div id="conflictsList" class="conflicts-list"></div>
                    <div class="modal-footer">
                        <button id="keepLocalBtn" class="btn btn-secondary">Keep Local</button>
                        <button id="useServerBtn" class="btn btn-primary">Use Server</button>
                        <button id="mergeDataBtn" class="btn btn-success">Merge Both</button>
                    </div>
                </div>
            </div>
                <div class="storage-controls">
                    <h3>Data Management</h3>
                    <div class="control-buttons">
                        <button id="exportBtn" class="btn btn-success" title="Export quotes to JSON file">
                            ‚¨á Export Quotes
                        </button>
                        <label class="file-input-label" title="Import quotes from JSON file">
                            ‚¨Ü Import Quotes
                            <input 
                                type="file" 
                                id="importFile" 
                                accept=".json" 
                                style="display: none;"
                            />
                        </label>
                        <button id="clearStorageBtn" class="btn btn-warning" title="Clear all stored data">
                            üóë Clear Storage
                        </button>
                        <button id="viewStorageBtn" class="btn btn-info" title="View storage info">
                            üìä View Storage Info
                        </button>
                    </div>
                </div>
            </section>

            <!-- Storage Info Display -->
            <div id="storageInfo" class="storage-info" style="display: none;"></div>

            <!-- Category Filter Section -->
            <section class="filter-section">
                <div class="filter-header">
                    <h3>Filter Quotes by Category</h3>
                    <button id="resetFilterBtn" class="btn btn-sm btn-secondary" title="Reset to all categories">
                        Reset Filter
                    </button>
                </div>
                
                <div class="filter-controls">
                    <div class="filter-dropdown-wrapper">
                        <label for="categoryFilter">Select Category:</label>
                        <select id="categoryFilter">
                            <option value="">All Categories</option>
                        </select>
                    </div>
                    
                    <div class="filter-buttons-wrapper">
                        <label>Quick Filter:</label>
                        <div id="categoryButtons" class="category-buttons"></div>
                    </div>
                </div>
                
                <div id="filterStats" class="filter-stats"></div>
            </section>

            <!-- Quote Display Section -->
            <section class="quote-section">
                <div id="quoteDisplay" class="quote-display">
                    <p id="quoteText" class="quote-text">Click "Show New Quote" to get started!</p>
                    <p id="quoteCategory" class="quote-category"></p>
                </div>
                <button id="showQuoteBtn" class="btn btn-primary">Show New Quote</button>
            </section>

            <!-- Add Quote Section -->
            <section class="add-quote-section">
                <h2>Add Your Own Quote</h2>
                <button id="toggleFormBtn" class="btn btn-secondary">Add Quote</button>
                <div id="addQuoteFormContainer"></div>
            </section>

            <!-- Quotes List Section -->
            <section class="quotes-list-section">
                <h2>All Quotes (<span id="quoteCount">0</span>)</h2>
                <div id="quotesList" class="quotes-list"></div>
            </section>
        </main>

        <footer>
            <p>&copy; 2024 Dynamic Quote Generator. Built with pure JavaScript & Web Storage.</p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>